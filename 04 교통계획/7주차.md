## Regression Analysis

오차항이 존재함
x가 여러개일때 `다중회귀분석`이라고 함
통행 발생 모형에 여러개가 있는데 `Growth Factor`, `Trip Generation Ratio`(원단위)
숙제 할 때 원단위표 그려주고, 만드는 법은 그냥 계산해주면 됨
오차를 최소화하는 `Beta0`와 `Beta1`을 구하는 법 -> `최소자승법`
식에서 상수항이 있고없고는 원점을 지나냐 안지나냐 차이
어떤 자료에 대해 대표값을 나타낸다할때 가장 좋은건 평균값
SST은 토탈 섬 스퀘어 : 총 오차항의 제곱
오차라고 하는건 추정한 값과 참값이 가까우면 가까울수록 좋은거임
SSE는 에러 섬 스퀘어 : 참값과 추정값과의 차이
SSR은 추정값과 평균값이 차이
엑셀에서 SSR은 회귀 제곱합, SSE는 잔차제곱합, SST는 합계 제곱합
SST = SSR + SSE

$$
R^2 = \frac{SSR}{SST} = 1 - \frac{SSE}{SST}
$$

x의 개수가 증가하면 증가할수록 $ R^2 $ 의 값은 증가한다
그래서 Adjusted R^2이 있음 SSE/SST사이에 (n-1)/(n-k-1)을 곱해줌
엑셀을 보고 Adj R^2를 구하려면 n은 관측수, k는 파라매터의 숫자 : 베타원 베타투(x가 하나일 때)

x1은 가구원 수 인데 x2를 계절로 두고싶어. x3를 성별로 두고싶어. 이게 가능할까?
이걸 넣는 방법을 discrete, category로 분류, uncountable한 변수들
우리가 지금까지 한건 continuous regression
dummy변수를 가지고 모든 카테고리 변수를 더미변수로 바꿔줄 수 있음
J라는 카테고리가 있으면 더미변수는 J-1개의 더미변수

계절이라 하면 봄 여름 가을 겨울 해서 J는 4
각각을 x1, x2, x3, x4로 하고 더미변수는 0또는 1의 값만 갖음
만약 선택한게 봄이면 x1만 1이고 나머지는 0의 값을 갖음
세값이 0이면 마지막 x4는 무조건 1이되는거야. 이 x4가 기본값 base가 되는 거

$$
y = 1.3 + 2.0x_1 + 1.3D_1
$$
x1은 개인소유 자도아 대수
d1은 여성 -> 여성이면 d1의 값은 1이 되고 그 항은 1.3이 더해지는 거고 곧 여성일경우 통행이 더 많다는 뜻이 됨
결국 그래프가 2개가 됨 여성일 때 그래프, 남성일 때 그래프, 결국 절편의 문제

더미변수에 학생을 넣고싶다 하면 1학년 2학년 3학년 4학년 구분하고
$$
y = 1.3 + 2.0x_1 + 0.3D_1 + 0.2D_2 + 1.3D_3
$$
하면 3학년이 제일 많이 돌아다닌다는 거겠지
즉 더미변수가 들어가면 그래프가 여러개가 됨

### Exercises 4.1 
수입이 커져서 5년 이따가 차가 없는 가구의 50%가 차 한대가 생길거라 예상한다.
zone generate를 구하라.
차가 0대인건 180명 -> 하루동안 6통행, 차 1대는 80명 8통행

### Exercises 4.2
세 개의 회귀방정식이 있음
괄호안에 있는 건 t값 -> t검정에 쓰이는 값
막상 보면 0.996이 좋은 줄 알지만 함정이라 뜯어봐야함
첫번째 회귀방정식에서 123.2밑에 (5.2)가 있는데 이게 t검정의 t값임

가설검정이란게 있는데 h0이 null hypo 귀무가설
h1이나 ha가 alternative hypo라 해서 대립가설 이라함
사실 테스트 할때 beta0는 크게 중요하게 생각 안함
우리가 봐야할 건 x1앞에 있는 beta1
통상적으로 이렇게 beta0을 0으로 둬보고 beta1을 0으로 둬보고 하는걸 t-test라고 함
t값이 크면 클수록 reject하게 되어있음 리젝트 되었다는 것은 베타가 0이 아니다.
그러니 회귀방정식의 항이 정당하다는 뜻임.
신뢰도 95%면 1.96 99%면 2.56같은 걸 넣음
원래는 degree of freedom자유도를 고려함
t값은 항상 절대값을 씌워서 2보다 크면 reject하자. -> 2보다 커야 좋다는 거임
**리젝트가 좋은거임**

첫번째 회귀방정식의 t검정은 통과
두번째 회귀방정식에서 1.9는 아리까리, 1.8도 아리까리 perfect하진 않음
일단 넘어가고 세번째를 보자. 0.6임 근데 절편이라 0.6이어도 어느정도 용인됨
셋 다 수치적으로는 어느정도 ok야. 2번과 3번은 통계적으로 찜찜함 대신 r값이 높음

그러면 이제 계수의 부호를 봐야함
x1의 부호가 +야. 토탈 종사자수 -> 말 됨
x2 3 4는 각 분야별, 산업별 종사자수
세번째 회귀방정식에 총 종사자수는 +인데 x4가 -임
결론은 우리가 알아서 내시길 하여튼 y의 기준은 하우스홀드야 개인이야 뭐야 -> zone이야

회귀방정식의 **오차항은 정규분포**를 따른다. **평균은 0이고 분산은 시그마 스퀘어**를 따른다.
x1도 있고 x2 x3 x4도 있음
근데 x1은 부호가 +인데 x4는 부호가 - 였음
x1과 x4는 상식적으로 상관성이 엄청나게 높음
연관성이 있다면 좋은 회귀방정식이 아니다. 만약 그렇다면 둘중 하나를 빼야함
그래서 세번째 회귀방정식에서 x4의 부호가 -였던거임
**각 x들과 오차항끼리는 연관성이 적고 독립적이어야한다.**

엑셀로 볼때 t값보다 유의확률을 보는게 편함 P값
t값 옆에 있는 유의확률이 0.05보다 작으면 reject 좋은거임 (95%에서)
99%로 하려면 0.01보다 작으면 reject하면 되고

### Exercises 4.3
여기서 y는 하우스홀드당 발생하는 통행량
Z1은 더미변수인데 차량을 1대 가지고 있으면 1임
Z2는 2대이상의 차량을 가지면 Z2가 1임
만약 차량이 하나도 없으면 둘 다 0

### Exercises 4.4
회귀방정식에 값을 집어넣어 추정한 2개의 값이 나오면 두 개의 결과값을 비교하라는 거임
맨 밑 테이블은 참값 테이블임

# Trip Distribution
트립 제너레이션은 존에서 발생량과 도착량을 추정하는 것
1단계에서 구한 Dj, Oi들은 고정시키고 이제 네모 친 각 셀들(Tij)을 채워나가는게 트립 디스트리뷰션
big-t(T)는 미래의 통행량
Tij = f(Oi, Dj, Cij)
Cost에도 영향을 받는다. Cij는 i에서 j가는데 드는 비용
Cost는 돈일수도 있고 시간일수도 있고

## Cost
C는 여러 항과 가중치로 구성되는데 변수에는 In-vehicle time, walking time, waiting, interchange, fare, parking등등 매우 다양하게 있음
시간을 돈으로 바꾸는 방법을 value of time(VOT)라 함
최저시급을 곱하는 법도 있고 직장인 한달 월급가지고 할 수도 있고

## Models
- Growth-Factor Methods
- Gravity Models
- Entropy-Maximizing approach : 중력모형이랑 비슷함, 일종이라 보면 됨
- 간섭기회모형 : 접근성이 팩터임